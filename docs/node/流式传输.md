<!--
 * @Author: your name
 * @Date: 2020-12-21 21:41:00
 * @LastEditTime: 2020-12-23 08:54:18
 * @LastEditors: Please set LastEditors
 * @Description: In User Settings Edit
 * @FilePath: /blogWebsite/docs/node/流式传输.md
-->
# 流式传输
&emsp;&emsp;流式传输定义很广泛，主要指通过网络传送流媒体（如视频、音频）的技术总称。其特定含义为通过Internet 将影视节目传送到PC机。实现流式传输有两种方法：实时流式传输（Realtime streaming）和顺序流式传输（progressive streaming）。

&emsp;&emsp;一般说来，如视频为实时广播，或使用流式传输媒体服务器，或应用如RTSP的实时协议，即为实时流式传输。如使用HTTP服务器，文件即通过顺序流发送。采用哪种传输方法依赖你的需求。**当然，流式文件也支持在播放前完全下载到硬盘。**

## 传输方案

&emsp;&emsp;在网络上传输音/视频（英文缩写A/V）等多媒体信息主要有**下载**和**流式传输**两种方案。A/V文件一般都较大，所以需要的存储容量也较大。同时由于网络带宽的限制，下载常常要花数分钟甚至数小时，所以采用下载的处理方法，时延会比较大。流式传输时，声音、影像或动画等时基媒体由音视频服务器向用户计算机的连续、实时传送，用户不必等到整个文件全部下载完毕，而只需经过几秒或十数秒传输，待数据达到一定的数量后，即可进行观看，可以大大缩短用户需要等待的时间。当声音等时基媒体在客户机上播放时，文件的剩余部分将在后台从服务器内继续下载。流式不仅使启动延时成十倍、百倍地缩短，而且不需要太大的缓存容量。流式传输避免了用户必须等待整个文件全部从Internet上下载才能观看的缺点。

&emsp;&emsp;流媒体指在Internet/Intranet中使用流式传输技术的连续时基媒体，如：音频、视频或多媒体文件。

&emsp;&emsp;流式媒体在播放前并不下载整个文件，只将开始部分内容存入内存，流式媒体的数据流随时传送随时播放，只是在开始时有一些延迟。流媒体实现的关键技术就是流式传输。

## 传输方式
### 顺序传输

&emsp;&emsp;顺序流式传输是顺序下载，在下载文件的同时用户可观看在线媒体，在给定时刻，用户只能观看已下载的那部分，而不能跳到还未下载的前头部分，顺序流式传输不像实时流式传输在传输期间根据用户连接的速度做调整。由于标准的HTTP服务器可发送这种形式的文件，也不需要其他特殊协议，它经常被称作HTTP流式传输。顺序流式传输比较适合高质量的短片段，如片头、片尾和广告，由于该文件在播放前观看的部分是无损下载的，这种方法保证电影播放的最终质量。这意味着用户在观看前，必须经历延迟，对较慢的连接尤其如此。

&emsp;&emsp;对通过调制解调器发布短片段，顺序流式传输显得很实用，它允许用比调制解调器更高的数据速率创建视频片段。尽管有延迟，毕竟可让你发布较高质量的视频片段。

&emsp;&emsp;顺序流式文件是放在标准HTTP或FTP服务器上，易于管理，基本上与防火墙无关。顺序流式传输不适合长片段和有随机访问要求的视频（但可以支持随机访问），如：讲座、演说与演示。它也不支持现场广播，严格说来，它是一种点播技术。

### 实时传输

&emsp;&emsp;实时流式传输指保证媒体信号带宽与网络连接配匹 **（这意味着图像质量会因网络速度降低而变差）**，使媒体可被实时观看到。实时流与HTTP流式传输不同，它需要专用的流媒体服务器与传输协议。

&emsp;&emsp;实时流式传输总是实时传送，特别适合现场事件，也支持随机访问，用户可快进或后退以观看前面或后面的内容。理论上，实时流一经播放就可不停止，但实际上，可能发生周期暂停。

&emsp;&emsp;实时流式传输必须配匹连接带宽，**这意味着在以调制解调器速度连接时图象质量较差。** 而且，由于出错丢失的信息被忽略掉，网络拥挤或出现问题时，视频质量很差。如欲保证视频质量，顺序流式传输也许更好。实时流式传输需要特定服务器，如QuickTime Streaming Server、RealServer与Windows Media Server。这些服务器允许你对媒体发送进行更多级别的控制，因而系统设置、管理比标准HTTP服务器更复杂。实时流式传输还需要特殊网络协议，如：RTSP (Realtime Streaming Protocol)或MMS (Microsoft Media Server)。这些协议在有防火墙时可能会出现问题，导致用户不能看到一些地点的实时内容。

### HTTP流式传输的优点：

- 适合较小的文件
- 不需要特殊的服务器软件，WEB服务器一抓一大把
- 在低带宽的网络连接下也可以工作，大不了下载完成再看)
- 高带宽(带宽大于流文件的比特率)，可以实现边下载边播放，就像流方式一样
- 可以适用于任何文件类型
- 网络丢包会重新传输直至用户收到
- 可以穿过几乎所有防火墙(这是使用web方式的好处)

### HTTP流式传输的缺点：

- 不能实现广播或者多播
- 不能广播实况流
- 当带宽很大时，传输的速度大大超过需要的速度，对服务器压力太大，也浪费带宽
- 不能跳过头部，必须先下完前面的才可以看后面的(这个应该可以克服)
- 客户端的磁盘可以保存节目(这个可以说是优点也可以说是缺点)

### 实时流方式的优点：
- 可以实现实况转播，可以实现广播和多播
- 素材可以随机访问
- 节约用户的磁盘空间
- 不浪费带宽
- 不会在客户的硬盘留下copy(可惜啊,现在n多的流下载工具)
- 可以传输一个文件中的独立流(智能流技术)
- 可以实现每个流的带宽分配，带宽补偿等功能

### 实时流方式缺点：
- 需要使用专用的流服务器
- 假如文件比特率超过连接速度，观看将会断续，这个很难让人忍受，所以高质量(也就意味着告高比特率) 的片子一般都是下载到硬盘上看
- 丢失的包将会永久丢失
- 很多格式的媒体文件不能使用流式播放
- 有可能被防火墙挡住
- 可变码率(rmvb，一部分wmv)的片子不适合流式播放，除非你的连接带宽比文件的峰值还高

### 其他区别：

> 流式传输一般使用rtp/rtcp mms rtsp http(这个和web的http有所不同)协议,渐进式下载一般使用http协议，偶尔用ftp